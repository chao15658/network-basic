# 网络基础笔试题总结

1、在滑动窗口协议中，如果发送窗口大于1 、 接收窗口等于1时，就是

```
连续重发协议
停--等协议
选择重发协议
争用协议
```

答案:1

A.当**发送窗口>****1** **,****接收窗口=****1**时，为**连续重发协议，准确而言应为后退N帧协议**。

B.当**发送窗口=1,接收窗口=1**时，为**停止等待协议。**因为发送方需要判断每个发送的帧是新发送的帧还是超时重传的帧，故给每个帧前都加一个序号，由于**停止等待协议中只有当一个帧发送确认后才能发送下一个**，所以用1个比特来编号即可。

C.当**发送窗口>1,接收窗口>1**时，为**选择重发协议****。**当接收方发现某个帧出错后（可能未按序到达），它将后面到达的正确的帧放入接收缓冲区中，同时要求发送方重传出错的帧（对按序到达的最大序号进行确认，当发送方收到重复确认了就知道出错了），当重传的帧到达后，将缓冲区中按序一并发送给高层。

D.滑动窗口协议中无该协议。

**总结：**

**滑动窗口协议有**

**1、停止等待协议，发送窗口=1，接受窗口=1；**

**2、后退N帧协议，发送窗口>1,接收窗口=1;**

**3、选择重传协议，发送窗口>1,接收窗口>1。**



2、阿里巴巴有相距1500km的机房A和B，现有100GB数据需要通过一条FTP连接在100s的时间内从A传输到B。已知FTP连接建立在TCP协议之上，而TCP协议通过ACK来确认每个数据包是否正确传送。网络信号传输速度2*108 m/s，假设机房间带宽足够高，那么A节点的发送缓冲区可以设置为最小

```
18M
12M
6M
24M
```



100GB在100s传输完毕，则传输速度至少为1G/s

一个包由发送到发出到收到接收端的确认包，历经时间：

1500km*2/(2 * 10^5km/s)=1.5*10^(-2)s

缓冲区至少应该超过一个包的往返时间内增长的数据包大小 1.5*10^(-2) s * 1G/s= 1.5*1024M/100=15.36M

TCP协议原理：TCP每发送一个报文段，就启动一个定时器，如果在定时器超时之后还没有收到ACK确认，就重传该报文。 如图所示，数据包由A的缓冲区发往B，B在收到数据包以后，回发一个ACK确认包给A，之后A将该数据包从缓冲区释放。因此，该数据包会一直缓存在A的缓冲区，直到一个ACK确认为止。题目要求在100s内发送100GB数据，网络的传输速率至少是1G/s，某个数据包n在A中缓存的时间就是数据包n从A到B，再加上该数据包的ACK从B到A的时间：2*1500m/(2*108m/s)=1.5*10-2s，该段时间A中缓存的数据量至少是1G/s*1.5*10-2s约为15M

![img](http://uploadfiles.nowcoder.com/files/20141009/787_1412839205433_14.bmp)



2、在下图所表示的采用"存储-转发" 方式的 分组的交换网络中 ， 所有链路的数据传输速度为100Mbps，分组大小为1000B， 其中 分组头大小为20B ， 若主机H1向主机H2发送一个大小为980000 B 的文件，则在不考虑分组拆装时间和传播延迟的情况下，从H1发送 开始 到H2接 收 完为止，需要的时间至少是()

![img](https://uploadfiles.nowcoder.com/images/20161106/3814779_1478416282382_90EC41F11076E13028CAF80593B78C72)



980000B/980B=1000分组数

发送时延=分组长度/信道宽度

1000B/100Mbps=1000*8bit/(100*10^6bit/s)=8*10^(-5)s=0.08ms

两次存储转发

0.08*2=0.16ms

1000*发送时延=80ms

80ms+0.16ms=80.16ms

![img](https://uploadfiles.nowcoder.com/images/20170312/5892222_1489295436442_F3CCDD27D2000E3F9255A7E3E2C48800)



3、若主机A需要知道主机B的MAC地址，则属于ARP的工作流程为（ ）。

```
主机A在网络中广播ARP请求报文
主机A接收到请求报文后将自己的IP地址到MAC地址的映射发送给主机B
主机B收到请求报文后将主机A的IP地址和MAC地址映射存储到自己的CACHE中
主机A缓存主机B的IP地址到MAC地址的映射
```

答案：1 3 4

**ARP协议工作过程**

当一个基于TCP/IP的应用程序需要从一台主机发送数据给另一台主机时，它把信息分割并封装成包，附上目的主机的IP地址。然后，寻找IP地址到实际MAC地址的映射，这需要发送ARP广播消息。当ARP找到了目的主机MAC地址后，就可以形成待发送帧的完整以太网帧头。最后，协议栈将IP包封装到以太网帧中进行传送。

![描述了ARP广播过程](http://images.51cto.com/files/uploadimg/20100612/1746310.jpg)

如图1所示，描述了ARP广播过程。

在图1中，当主机A要和主机B通信（如主机A Ping主机B）时。主机A会先检查其ARP缓存内是否有主机B的MAC地址。如果没有，主机**A会发送一个ARP请求广播包**，此包内包含着其欲与之通信的主机的IP地址，也就是主机B的IP地址。

当主机**B收到此广播后，会将自己的MAC地址利用ARP协议响应包传给主机A，并更新自己的ARP缓存**，也就是同时将主机A的IP地址/MAC地址对保存起来，以供后面使用。主机A在得到主机B的MAC地址后，就可以与主机B通信了。同时，主机**A也将主机B的IP地址/MAC地址对保存在自己的ARP协议缓存内**。



4、当用一台机器作为网络客户端时，该机器最多可以保持多少个到服务端的连接？

```
1
少于1024
少于65535
无限制
```

答案：3

由于IP地址唯一确定，就看端口号有多少了，不同的端口号可以连接不同的服务端，端口号的长度为16为，2*16次方，所以最多为65535个。



5、在一个采用 CSMA/CD 协议的网络中，传输介质是一根完整的电缆，传输速率为 1Gbps ，电缆中的信号传播速度是 200 000km/s 。若最小数据帧长度减少 800 比特，则最远的两个站点之间的距离至少需要（ ）

800bit/10^9bit/s = 8*10^(-7)s

200 000km/s * 8*10^(-7)s=2l   

l=0.08 km

![img](https://uploadfiles.nowcoder.com/images/20200215/969156946_1581768617433_DF681BEDF8B72DB08B41959312EB8646)



6、主机甲通过1 个路由器（存储转发方式）与主机乙互联，两段链路的数据传输速率均为10Mbps，主机甲分别采用报文交换和分组大小为 10 kb 的分组交换向主机乙发送 1 个大小为 8Mb（ 1M=106）的报文。 若忽略链路传播延迟、分组头开销和分组拆装时间， 则两种交换方式完成该报文传输所需的总时间分别为（ ）。

```
800 ms、 1600 ms
801 ms、 1600 ms
1 600 ms、 800 ms
1 600 ms、 801 ms
```

答案：D

不进行分组时，发送一个报文的时延是8Mb/10Mb/s=800ms，在接收端接收此报文的时延也是800ms，共计1600ms。进行分组后，发送一个报文的时延是10kb/10Mb/s=1ms，接收一个报文的时延也是1ms，但是在发送第二个报文时，第一个报文已经开始接收。共计有800个分组，总时间为801ms。

分组数 8Mb/10kb=800



7、关于TCP协议描述不正确的是（ ）

```
建立连接需要三次握手
TIME_WAIT状态时不再接受报文
TIME_WAIT状态的持续时间是可以调整的
FIN报文一般由请求方负责发送
```

答案：2

当主动关闭方发起FIN请求后，收到被动方的ACK回应，和FIN请求时，主动方进入TIME_WAIT，此时如果被动方在TIME_WAIT时间内收到主动方最后的ACK确认应答，则会再次发送FIN包给主动方，同时TIME_WAIT重新计时。由此说明，处于TIME_WAIT状态的主动方还可以接收信号。

8、linux tcpdump监听网卡 eth0,对方主机IP为10.1.1.180，tcp端口为80的数据，相应命令为？

```
tcpdump -h eth0 -nn 'tcp and host 10.1.1.180:80'
tcpdump -i eth0 -nn 'tcp and host 10.1.1.180:80'
tcpdump -h eth0 -nn 'tcp and port 80 and host 10.1.1.180'
tcpdump -i eth0 -nn 'tcp and port 80 and host 10.1.1.180'
```

答案：D

9、在无噪声情况下，若某通信链路的带宽为3khz 。采用4个相位。每个相位具有4种振幅的QAM调制技术，则该通信链路的最大数据传输速率是？

```
24kbit/s
48kbit/s
96kbit/s
12kbit/s
```

答案：1

考查对奈氏准则和香农定理，这是通信工程的理论。软件可忽略。

奈奎斯特：在无噪声情况下，码元速率极限值B与信道带宽的关系：B=2*H(Baud)

奈奎斯特公式----无噪信道传输能力公式：

C=2*H*log2N(bps)

H为信道的带宽，本题中H=3KHz；

N为一个码元所取得离散值个数，本题中N=16(4个相位，每个相位4中振幅)。

C=2*H*log2N=2*3kHz*log216=2*3k*4=24kbps;

香农公式是在带噪信道容量计算时使用的公式：

C=H*log2(1+S/N)(bps)

S为信号功率，N为噪声功率，S/N为信噪比；

10、A,B两台机器都正常工作,B机器未监听任何端口.如果A机器向B机器80端口发送SYN包,会收到何种类型的回包?

```
ACK包
FIN包
不会收到回包
RST包
```

答案：4

因为B机器未监听任何端口,A又向B的80端口发送了数据包,所以B不会建立连接,会异常结束建立连接,会发送RST包,如果是正常结束的话就会发送FIN包,RST是TCP连接中 出现差错产生的,RST置1可以用来拒绝一个非法的报文段或拒绝打开一个连接

11、下列HTTP错误代码描述正确的是：(  )

```
502 - 网关错误
403 - 服务不可用
404 - 无法找到文件
500 - 请求无效
200 – 内部错误
2xx – 都是成功的http请求和服务
```

答案：ACF

12、关于HTTP协议的说法，以下哪些说法是不正确的（）？

```
有状态，前后请求有关联关系
FTP也可以使用HTTP协议
HTTP响应包括数字状态码，200代表此次请求有正确返回
HTTP和TCP，UDP在网络分层里是同一层次的协议
```

答案：1、2、4

A:    HTTP（超文本传输协议）是一个基于请求与响应模式的、无状态的、应用层的协议。

B： 文件传输协议FTP、电子邮件传输协议SMTP、域名系统服务DNS、HTTP协议等都同是应用层协议。

C：HTTP协议 状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：

​             1xx：指示信息--表示请求已接收，继续处理
​             2xx：成功--表示请求已被成功接收、理解、接受
​             3xx：重定向--要完成请求必须进行更进一步的操作
​             4xx：客户端错误--请求有语法错误或请求无法实现
​             5xx：服务器端错误--服务器未能实现合法的请求
​       常见状态代码、状态描述、说明：
​             200 OK   //客户端请求成功
​             400 Bad Request //客户端请求有语法错误，不能被服务器所理解
​             401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用 
​             403 Forbidden //服务器收到请求，但是拒绝提供服务
​             404 Not Found //请求资源不存在，eg：输入了错误的URL
​             500 Internal Server Error //服务器发生不可预期的错误

​             503 Server Unavailable //服务器当前不能处理客户端的请求，一段时间后可能恢复正常

D： HTTP是应用层协议，TCP，UDP是传输层协议。



13、题目来源于王道论坛

主机甲和主机乙已建立了TCP连接，甲始终以MSS=1KB大小的段发送数据，并一直有数据发送；乙每收到一个数据段都会发出一个接收窗口为10KB的确认段。若甲在t时刻发生超时时拥塞窗口为8KB，则从t时刻起，不再发生超时的情况下，经过10个RTT后，甲的发送窗口是 。

- ```
    10KB
    ```

- ```
    12KB
    ```

- ```
    14KB
    ```

- ```
    15KB
    ```

答案：1

ssthresh被设定为8的一半即4，拥塞窗口被设为1KB 

  拥塞窗口经10个RTT依次变化为2、4（未超过ssthresh值之前以指数级增长，后面超过ssthresh之后以数量级增长）、5、6、7、8、9、10、11、12，最终达到12KB 

  而流量控制的角度出发，接受窗口恒为10KB 

  发送方的发送窗口=min(拥塞窗口，接收窗口) 

  故最后答案是10KB



14、服务与协议是完全不同的两个概念，下列关于它们的说法错误的是 （） 。

```
协议是水平的，即协议是控制对等实体间通信的规则。服务是垂直的，即服务是下层向上层通过层间接口提供的。
在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务。
协议的实现保证了能够向上一层提供服务。
OSI将层与层之间交换的数据单位称为协议数据单元PDU。
```

答案：D

**SDU（Service Data Unit）服务数据单元是OSI相邻上下层与层之间交换数据的单位** **协议数据单元**

**PDU（Protocol Data Unit）协议数据单元是OSI对等层次之间传递的数据单位**

15、题目来源于王道论坛

数据链路层采用后退N帧（GBN）协议，发送方已经发送了编号为0～7的帧。当计时器超时时，若发送方只收到0、2、3号帧的确认，则发送方需要重发的帧数是（）。

```
2
3
4
5
```

答案：3

在后退N帧协议中，当接收方检测到某个帧出错后，则简单地丢弃该帧及其后所有的后续帧，发送方超时后需重传该数据帧及其后续的所有帧。这里应注意，连续ARQ协议中，接收方一般采用累积确认的方式，即接收方对按序到达的最后一个分组发送确认，因此本题中收到3的确认帧就表示编号为0、1、2、3的帧已接收，而此时发送方未收到1号帧的确认只能代表确认帧在返回的过程中丢失了，而不代表1号帧未到达接收方。因此需要重传的帧为编号是4、5、6、7的帧。